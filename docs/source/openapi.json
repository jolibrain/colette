{"openapi":"3.1.0","info":{"title":"Colette v2 server","description":"*commit:* [ead58e014096805984d58edaa8326eb19b006773]\n\nThis is the Colette v2 API server\n    ","version":"0.1.0"},"paths":{"/v2/info":{"get":{"summary":"Info","operationId":"info_v2_info_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}}}}},"/v2/app/{sname}":{"put":{"summary":"Create Service","operationId":"create_service_v2_app__sname__put","parameters":[{"name":"sname","in":"path","required":true,"schema":{"type":"string","title":"Sname"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIData"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"summary":"Create Service","operationId":"create_service_v2_app__sname__put","parameters":[{"name":"sname","in":"path","required":true,"schema":{"type":"string","title":"Sname"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIData"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"summary":"Delete Service","operationId":"delete_service_v2_app__sname__delete","parameters":[{"name":"sname","in":"path","required":true,"schema":{"type":"string","title":"Sname"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v2/predict/{sname}":{"post":{"summary":"Predict Service","operationId":"predict_service_v2_predict__sname__post","parameters":[{"name":"sname","in":"path","required":true,"schema":{"type":"string","title":"Sname"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIData"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v2/index/{sname}":{"post":{"summary":"Index Service","operationId":"index_service_v2_index__sname__post","parameters":[{"name":"sname","in":"path","required":true,"schema":{"type":"string","title":"Sname"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIData"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"APIData":{"properties":{"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"app":{"anyOf":[{"$ref":"#/components/schemas/AppObj"},{"type":"null"}]},"parameters":{"$ref":"#/components/schemas/ParametersObj"}},"type":"object","title":"APIData"},"APIResponse":{"properties":{"version":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Version"},"status_code":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Status Code"},"status":{"anyOf":[{"$ref":"#/components/schemas/StatusObj"},{"type":"null"}]},"info":{"anyOf":[{"$ref":"#/components/schemas/InfoObj"},{"type":"null"}]},"service_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Service Name"},"full_prompt":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Full Prompt"},"full_response":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Full Response"},"sources":{"anyOf":[{"additionalProperties":{"items":{"type":"object"},"type":"array"},"type":"object"},{"type":"null"}],"title":"Sources"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message"},"output":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Output"}},"type":"object","title":"APIResponse"},"AppObj":{"properties":{"repository":{"anyOf":[{"type":"string","format":"directory-path"},{"type":"string","format":"path"}],"title":"Repository"},"create_repository":{"type":"boolean","title":"Create Repository","default":true},"models_repository":{"type":"string","title":"Models Repository"},"init":{"anyOf":[{"type":"string","minLength":1,"format":"uri"},{"type":"null"}],"title":"Init"},"verbose":{"anyOf":[{"$ref":"#/components/schemas/VerboseEnum"},{"type":"null"}],"default":"info"}},"type":"object","title":"AppObj"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"IndexObj":{"properties":{"files":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Files","default":["pdf"]},"indexer":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Indexer","default":"colpali"}},"type":"object","title":"IndexObj"},"InfoObj":{"properties":{"services":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Services"}},"type":"object","title":"InfoObj"},"InputConnectorObj":{"properties":{"lib":{"type":"string","title":"Lib","default":"langchain"},"preprocessing":{"anyOf":[{"$ref":"#/components/schemas/PreprocessingObj"},{"type":"null"}]},"rag":{"anyOf":[{"$ref":"#/components/schemas/RAGObj"},{"type":"null"}]},"data_output_type":{"type":"string","title":"Data Output Type","default":"txt"},"template":{"anyOf":[{"$ref":"#/components/schemas/TemplatePromptObj"},{"type":"null"}]},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message"},"data":{"anyOf":[{"items":{"type":"string","format":"directory-path"},"type":"array"},{"type":"null"}],"title":"Data"},"session_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session Id"},"summarize":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Summarize"},"index":{"anyOf":[{"$ref":"#/components/schemas/IndexObj"},{"type":"null"}]},"query_depth_mult":{"type":"integer","title":"Query Depth Mult","default":200}},"type":"object","title":"InputConnectorObj"},"LLMInferenceObj":{"properties":{"lib":{"type":"string","title":"Lib"},"sampling_params":{"type":"object","title":"Sampling Params","default":{"temperature":0}}},"type":"object","title":"LLMInferenceObj"},"LLMModelObj":{"properties":{"source":{"type":"string","title":"Source"},"filename":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Filename"},"shared":{"type":"boolean","title":"Shared","default":false},"inference":{"$ref":"#/components/schemas/LLMInferenceObj"},"context_size":{"type":"integer","title":"Context Size","default":2048},"quantization":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Quantization"},"gpu_ids":{"anyOf":[{"items":{"type":"integer"},"type":"array"},{"type":"null"}],"title":"Gpu Ids"},"memory_utilization":{"type":"number","title":"Memory Utilization","default":0.9},"image_width":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Image Width"},"image_height":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Image Height"},"dtype":{"type":"string","title":"Dtype","default":"auto"},"host":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Host"},"port":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Port"},"conversational":{"type":"boolean","title":"Conversational","default":false},"stitch_crops":{"type":"boolean","title":"Stitch Crops","default":false},"load_in_8bit":{"type":"boolean","title":"Load In 8Bit","default":false}},"type":"object","title":"LLMModelObj"},"OutputConnectorObj":{"properties":{"postprocessing":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Postprocessing"},"output_format":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Output Format","default":"json"}},"type":"object","title":"OutputConnectorObj"},"ParametersObj":{"properties":{"input":{"$ref":"#/components/schemas/InputConnectorObj"},"llm":{"$ref":"#/components/schemas/LLMModelObj"},"output":{"anyOf":[{"$ref":"#/components/schemas/OutputConnectorObj"},{"type":"null"}]}},"type":"object","title":"ParametersObj"},"PreprocessingObj":{"properties":{"files":{"items":{"type":"string"},"type":"array","title":"Files"},"lib":{"type":"string","title":"Lib"},"save_output":{"type":"boolean","title":"Save Output","default":false},"strict":{"type":"boolean","title":"Strict","default":false},"filters":{"items":{"type":"string"},"type":"array","title":"Filters"},"strategy":{"type":"string","title":"Strategy","default":"auto"},"cleaning":{"type":"boolean","title":"Cleaning","default":true},"dpi":{"type":"integer","title":"Dpi","default":300}},"type":"object","title":"PreprocessingObj"},"RAGMultimodalObj":{"properties":{"image_embedding_size":{"type":"integer","title":"Image Embedding Size","default":1536},"layout_detection":{"type":"boolean","title":"Layout Detection","default":true},"layout_detector_gpu_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Layout Detector Gpu Id"},"image_width":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Image Width"},"image_height":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Image Height"},"auto_scale_for_font":{"type":"boolean","title":"Auto Scale For Font","default":false},"min_font_size":{"type":"integer","title":"Min Font Size","default":24},"filter_width":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Filter Width"},"filter_height":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Filter Height"},"index_overview":{"type":"boolean","title":"Index Overview","default":true}},"type":"object","title":"RAGMultimodalObj"},"RAGObj":{"properties":{"indexdb_lib":{"type":"string","title":"Indexdb Lib","default":"chromadb"},"embedding_lib":{"type":"string","enum":["gpt4all","huggingface","colbert"],"title":"Embedding Lib","default":"colbert"},"embedding_model":{"type":"string","title":"Embedding Model"},"embedding_model_path":{"type":"string","title":"Embedding Model Path"},"shared_model":{"type":"boolean","title":"Shared Model","default":false},"chunk_size":{"type":"integer","title":"Chunk Size","default":250},"chunk_overlap":{"type":"integer","title":"Chunk Overlap","default":0},"chunk_num":{"type":"integer","title":"Chunk Num","default":1},"gpu_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Gpu Id","default":-1},"search":{"type":"boolean","title":"Search","default":false},"reindex":{"type":"boolean","title":"Reindex","default":false},"index_protection":{"type":"boolean","title":"Index Protection","default":true},"top_k":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Top K","default":4},"num_partitions":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Num Partitions","default":-1},"index_bsize":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Index Bsize","default":2},"ragm":{"$ref":"#/components/schemas/RAGMultimodalObj","default":{"image_embedding_size":1536,"layout_detection":true,"auto_scale_for_font":false,"min_font_size":24,"index_overview":true}}},"type":"object","title":"RAGObj"},"StatusObj":{"properties":{"code":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Code"},"status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"},"colette_code":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Colette Code"},"colette_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Colette Message"}},"type":"object","title":"StatusObj"},"TemplatePromptObj":{"properties":{"template_prompt":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Template Prompt"},"template_prompt_variables":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Template Prompt Variables"}},"type":"object","title":"TemplatePromptObj"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"VerboseEnum":{"type":"string","enum":["info","debug","warning","error","critical"],"title":"VerboseEnum"}}}}
